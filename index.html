<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#111827" />
  <title>Finan√ßas PWA (MVP)</title>
  <link rel="manifest" href="manifest.json">
  <style>
    :root{
      --bg:#0b1220; --card:#0f172a; --muted:#94a3b8; --text:#e5e7eb;
      --border:rgba(148,163,184,.22);
      --btn:#2563eb; --btn2:#111827;
      --good:#22c55e; --bad:#ef4444;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius:18px;
    }
    [data-theme="light"]{
      --bg:#f5f7fb; --card:#ffffff; --muted:#475569; --text:#0f172a;
      --border:rgba(15,23,42,.12);
      --btn:#2563eb; --btn2:#e2e8f0;
      --shadow: 0 10px 30px rgba(15,23,42,.10);
    }
    *{ box-sizing:border-box; }
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
      background:var(--bg); color:var(--text);
    }
    .wrap{ max-width:980px; margin:0 auto; padding:20px; }
    .topbar{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:14px 16px; border:1px solid var(--border); background:var(--card);
      border-radius:var(--radius); box-shadow:var(--shadow);
    }
    .title{ font-weight:800; letter-spacing:.2px; }
    .subtitle{ color:var(--muted); font-size:13px; margin-top:2px; }
    .row{ display:flex; gap:12px; flex-wrap:wrap; }
    .btn{
      border:1px solid var(--border); background:var(--btn2); color:var(--text);
      padding:10px 12px; border-radius:12px; cursor:pointer;
      font-weight:700; letter-spacing:.2px;
    }
    .btn.primary{ background:var(--btn); border-color:transparent; }
    .btn:disabled{ opacity:.6; cursor:not-allowed; }

    .grid{ display:grid; grid-template-columns: 1.2fr .8fr; gap:14px; margin-top:14px; }
    @media (max-width: 920px){ .grid{ grid-template-columns: 1fr; } }

    .card{
      border:1px solid var(--border); background:var(--card);
      border-radius:var(--radius); box-shadow:var(--shadow);
      padding:14px;
    }
    .card h3{ margin:0 0 10px; font-size:16px; }
    .muted{ color:var(--muted); font-size:13px; }
    textarea, input{
      width:100%; border:1px solid var(--border); background:transparent; color:var(--text);
      padding:12px; border-radius:14px; outline:none; font-size:14px;
    }
    textarea{ min-height:88px; resize:vertical; }
    .actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }

    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:6px 10px; border-radius:999px; border:1px solid var(--border);
      color:var(--muted); font-size:12px;
    }

    .list{ display:flex; flex-direction:column; gap:10px; margin-top:10px; }
    .item{
      border:1px solid var(--border); border-radius:14px; padding:12px;
      display:flex; justify-content:space-between; gap:12px;
    }
    .item strong{ display:block; }
    .tag{
      font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border);
      color:var(--muted);
    }
    .right{ text-align:right; min-width:120px; }
    .ok{ color:var(--good); }
    .err{ color:var(--bad); }

    .toast{
      margin-top:10px; padding:10px 12px; border-radius:14px;
      border:1px solid var(--border); background:rgba(0,0,0,.08);
      font-size:13px; white-space:pre-line;
    }

    /* Modal */
    .backdrop{
      position:fixed; inset:0; background:rgba(0,0,0,.55);
      display:none; align-items:center; justify-content:center; padding:18px;
    }
    .backdrop.show{ display:flex; }
    .modal{
      width:min(560px, 100%);
      border:1px solid var(--border); background:var(--card);
      border-radius:20px; box-shadow:var(--shadow);
      padding:14px;
    }
    .modal h3{ margin:0 0 6px; }
    .modal .muted{ margin-bottom:10px; }
    .hr{ height:1px; background:var(--border); margin:12px 0; }

    .tabs{ display:flex; gap:10px; }
.tab{
  border:1px solid var(--border);
  background:transparent;
  color:var(--muted);
  padding:10px 12px;
  border-radius:12px;
  cursor:pointer;
  font-weight:800;
}
.tab.active{
  background:rgba(37,99,235,.15);
  color:var(--text);
  border-color:rgba(37,99,235,.35);
}
.view{ display:none; }
.view.show{ display:block; }

/* An√°lise */
.gridAna{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:14px;
  margin-top:14px;
}
.span2{ grid-column: span 2; }
.kpiTitle{ color:var(--muted); font-weight:800; font-size:13px; }
.kpiValue{ font-size:28px; font-weight:900; margin-top:6px; }

.barTrack{
  height:12px;
  border:1px solid var(--border);
  border-radius:999px;
  overflow:hidden;
}
.barFill{
  height:100%;
  background:rgba(34,197,94,.55);
}

  </style>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <div>
        <div class="title">üí∏ Finan√ßas (MVP)</div>
        <div class="subtitle">Apps Script + Sheets ‚Ä¢ modo humano</div>
      </div>
      <div class="row">
        <button class="btn" id="themeBtn">üåô/‚òÄÔ∏è</button>
        <button class="btn" id="tokenBtn">üîë Token</button>
      </div>
    </div>

    <!-- Tabs -->
    <div class="card" style="margin-top:14px; padding:10px 12px;">
      <div class="tabs">
        <button class="tab active" id="tab-registrar">Registrar</button>
        <button class="tab" id="tab-analise">An√°lise</button>
        <button class="tab" id="tab-historico" disabled>Hist√≥rico</button>

      </div>
    </div>

    <!-- VIEW: Registrar -->
    <div id="view-registrar" class="view show">
      <div class="grid">
        <div class="card">
          <h3>Registrar</h3>
          <div class="muted">Ex.: ‚Äúpassei no mercado hoje e deu 12,50 no d√©bito pra alimenta√ß√£o‚Äù</div>
          <textarea id="inputText" placeholder="Digite aqui..."></textarea>

          <div class="actions">
            <button class="btn primary" id="sendBtn">Enviar</button>
            <button class="btn" id="helpBtn">Help</button>
            <button class="btn" id="refreshBtn">Atualizar lista</button>
          </div>

          <div class="toast" id="toast" style="display:none;"></div>

          <div class="actions" style="margin-top:12px;">
            <span class="pill" id="netPill">üåê verificando...</span>
          </div>
        </div>

        <div class="card">
          <h3>√öltimos lan√ßamentos</h3>
          <div class="muted" id="monthLabel">‚Äî</div>
          <div class="list" id="list"></div>
        </div>
      </div>
    </div>

    <!-- VIEW: An√°lise -->
    <div id="view-analise" class="view">
      <div class="gridAna">
        <div class="card big">
          <div class="kpiTitle">Saldo</div>
          <div class="kpiValue" id="kpiSaldo">‚Äî</div>
          <div class="muted" id="kpiSaldoHint">‚Äî</div>
        </div>

        <div class="card big">
          <div class="kpiTitle">Gastos do m√™s</div>
          <div class="kpiValue" id="kpiGastosMes">‚Äî</div>
          <div class="muted" id="kpiGastosMesHint">‚Äî</div>
        </div>

        <div class="card">
          <div class="kpiTitle">Cr√©dito</div>
          <div class="kpiValue" id="kpiCredito">‚Äî</div>
          <div class="muted">Somente lan√ßamentos ‚ÄúCr√©dito‚Äù do m√™s</div>
        </div>

        <div class="card">
          <div class="kpiTitle">Parcelados</div>
          <div class="kpiValue" id="kpiParcelados">‚Äî</div>
          <div class="muted">Somente parcelas do m√™s (n√£o o total do contrato)</div>
        </div>

        <div class="card span2">
          <div class="row" style="align-items:flex-end; justify-content:space-between;">
            <div>
              <h3 style="margin:0;">Top categorias</h3>
              <div class="muted">Distribui√ß√£o por categoria</div>
            </div>
    <h3 style="margin:0;">Top categorias</h3>
    <div class="muted">Distribui√ß√£o por categoria</div>
  </div>

  <div class="row" style="gap:8px; align-items:center;">
    <select id="monthSelect" style="padding:10px 12px; border-radius:12px; border:1px solid var(--border); background:transparent; color:var(--text);">
      <option>Janeiro</option><option>Fevereiro</option><option>Mar√ßo</option><option>Abril</option>
      <option>Maio</option><option>Junho</option><option>Julho</option><option>Agosto</option>
      <option>Setembro</option><option>Outubro</option><option>Novembro</option><option>Dezembro</option>
    </select>
    <div class="muted" id="anaMonthLabel">‚Äî</div>
  </div>
</div>

          </div>

          <div class="bars" id="barsTopCats"></div>

          <div class="muted" style="margin-top:10px;">
            ‚Üª Atualiza ao clicar em ‚ÄúAtualizar lista‚Äù ou ao abrir a aba.
          </div>
        </div>

        <div class="card span2">
          <h3 style="margin:0 0 8px;">√öltimos lan√ßamentos</h3>
          <div class="list" id="anaList"></div>
        </div>
      </div>
    </div>
    <!-- VIEW: Hist√≥rico (depois) -->
    <div id="view-historico" class="view">
      <div class="card">
        <h3>Hist√≥rico</h3>
        <div class="muted">Vamos montar essa aba depois (filtro por m√™s, busca, etc.).</div>
      </div>
    </div>
  </div>

  <!-- Modal confirma√ß√£o -->
  <div class="backdrop" id="backdrop">
    <div class="modal">
      <h3>Confirmar nome/descri√ß√£o</h3>
      <div class="muted" id="confirmMsg">‚Äî</div>

      <div class="hr"></div>

      <label class="muted">Nome sugerido (voc√™ pode editar):</label>
      <input id="nameEdit" placeholder="Ex.: Mercado" />

      <div class="actions">
        <button class="btn primary" id="confirmBtn">Confirmar</button>
        <button class="btn" id="cancelPendingBtn">Cancelar</button>
      </div>

      <div class="toast" id="confirmToast" style="display:none;"></div>
    </div>
  </div>
  <script src="app.js"></script>
</body>
</html>










